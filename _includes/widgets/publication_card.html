{% assign all_selected = include.publications | where: "selected", true %}

{% assign ml  = all_selected | where: "category", "Machine Learning" | sort: "date" | reverse %}
{% assign eai = all_selected | where: "category", "Embodied AI"     | sort: "date" | reverse %}
{% assign sai = all_selected | where: "category", "Spatial AI"      | sort: "date" | reverse %}

<div class="my-3 p-0 bg-white shadow-sm rounded-xl">
  <h6 class="border-bottom border-gray p-3 mb-0">
    {% if include.title %}{{ include.title }}{% else %}<i class="fas fa-star"></i> Selected Recent Publications{% endif %} 
    <a href="{{ 'publications' | relative_url }}">(view all <i class="fas fa-angle-double-right"></i>)</a>
  </h6>

  {% if ml.size > 0 %}
    <h6 class="subsection-title px-3 pt-3">Machine Learning</h6>
    {% for item in ml %}
      {% include widgets/publication_item.html item=item first=false last=false %}
    {% endfor %}
  {% endif %}

  {% if eai.size > 0 %}
    <h6 class="subsection-title px-3 pt-3">Embodied AI</h6>
    {% for item in eai %}
      {% include widgets/publication_item.html item=item first=false last=false %}
    {% endfor %}
  {% endif %}

  {% if sai.size > 0 %}
    {% for item in sai %}
      {% include widgets/publication_item.html item=item first=false last=false %}
    {% endfor %}
  {% endif %}

  <h6 class="d-block p-3 mt-0 text-right">
    <a href="{{ 'publications' | relative_url }}">All publications <i class="fas fa-angle-double-right"></i></a>
  </h6>
</div>

